<!-- Copyright (c) Microsoft Corporation.
     Licensed under the MIT License. -->

<!-- <CalendarSnippet> -->
{% extends "tutorial/layout.html" %}
{% block content %}
<!--<div id='events'>{{ events }}</div>-->

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      timeZone: 'UTC-5',
      initialView: 'dayGridMonth',
      events: [
      {% for ev in events %}
        { 
          title: '{{ ev.subject }}',
          start: '{{ ev.start.dateTime | date:"c" }}',
          end: '{{ ev.end.dateTime | date:"c" }}',
          display: 'list-item',
          selectable: true,
        },// will be shifted to local
      {% endfor %}
      ],
      dateClick: function() {
        window.location = document.getElementById('register').click().href;
      }
    });
    var start = event.start 
    calendar.render();
  });

</script>

<h1>Calendar</h1>

<table class="table">
  <thead>
    <tr>
      <th scope="col">Organizador</th>
      <th scope="col">Asunto</th>
      <th scope="col">Inicio</th>
      <th scope="col">Fin</th>
    </tr>
  </thead>
  <tbody>
    {% if events %}
      {% for event in events %}
        <tr>
          <td>{{ event.organizer.emailAddress.name }}</td>
          <td>{{ event.subject }}</td>
          <td>{{ event.start.dateTime|date:"c" }}</td>
          <td>{{ event.end.dateTime|date:'SHORT_DATETIME_FORMAT' }}</td>
        </tr>
      {% endfor %}
    {% endif %}
  </tbody>
</table>

<div id='calendar'></div>

<!-- Modal HTML embedded directly into document -->
<div id="ex1" class="modal" style="top:55px !important; padding:0px !important; height:42% !important;">
  <div style="background-color: rgb(0, 120, 212); color:white; padding: 5px 15px;">
    Calendario
  </div>
  <div style="padding:25px;">
    <form action="{% url 'eventCreate' %}" method="POST">{% csrf_token %}
      <input name="owner" type="hidden" value="Rubén Jahir Alemán Duarte"></input>
      <p style="margin-bottom:15px;"><input name="subject" placeholder="Agregar un título" style="width:100%; border-style:none; border-bottom:solid; border-color: rgb(41, 46, 49); border-width:thin;"></input></p>
      <p style="display:flex; margin-bottom:25px;">
        <input type="date" id="start" name="date"
          data-date-format="YYYY MMMM DD"
          value="2020-08-01"
          min="2020-08-01" max="2050-01-01"
          style="width:100% !important; border-style:none; border-bottom:solid; border-color: rgb(41, 46, 49); border-width:thin;">
        <select name="start" style="border-style:none; border-bottom:solid; border-color: rgb(41, 46, 49); border-width:thin;">
          <option value="value1">12:00 AM</option>
          <option value="value1">01:00 AM</option>
          <option value="value1">02:00 AM</option>
          <option value="value1">03:00 AM</option>
          <option value="value1">04:00 AM</option>
          <option value="value1">05:00 AM</option>
          <option value="value1">06:00 AM</option>
          <option value="value1">07:00 AM</option>
          <option value="value1">08:00 AM</option>
          <option value="value1">09:00 AM</option>
          <option value="value1">10:00 AM</option>
          <option value="value1">11:00 AM</option>
          <option value="value1">12:00 PM</option>
          <option value="value1">12:00 PM</option>
          <option value="value1">01:00 PM</option>
          <option value="value1">02:00 PM</option>
          <option value="value1">03:00 PM</option>
          <option value="value1">04:00 PM</option>
          <option value="value1">05:00 PM</option>
          <option value="value1">06:00 PM</option>
          <option value="value1">07:00 PM</option>
          <option value="value1">08:00 PM</option>
          <option value="value1">09:00 PM</option>
          <option value="value1">10:00 PM</option>
          <option value="value1">11:00 PM</option>
          <option value="value1">12:00 PM</option>
        </select>
        <select name="end" style="border-style:none; border-bottom:solid; border-color: rgb(41, 46, 49); border-width:thin;">
          <option value="value1">12:00 AM</option>
          <option value="value1">01:00 AM</option>
          <option value="value1">02:00 AM</option>
          <option value="value1">03:00 AM</option>
          <option value="value1">04:00 AM</option>
          <option value="value1">05:00 AM</option>
          <option value="value1">06:00 AM</option>
          <option value="value1">07:00 AM</option>
          <option value="value1">08:00 AM</option>
          <option value="value1">09:00 AM</option>
          <option value="value1">10:00 AM</option>
          <option value="value1">11:00 AM</option>
          <option value="value1">12:00 AM</option>
          <option value="value1">12:00 PM</option>
          <option value="value1">12:00 PM</option>
          <option value="value1">01:00 PM</option>
          <option value="value1">02:00 PM</option>
          <option value="value1">03:00 PM</option>
          <option value="value1">04:00 PM</option>
          <option value="value1">05:00 PM</option>
          <option value="value1">06:00 PM</option>
          <option value="value1">07:00 PM</option>
          <option value="value1">08:00 PM</option>
          <option value="value1">09:00 PM</option>
          <option value="value1">10:00 PM</option>
          <option value="value1">11:00 PM</option>
        </select>
      </p>
      <button type="submit" style="padding:8px; border-style: solid; border-width: 1.5px; border-color: rgb(0, 120, 212); background-color: rgb(0, 120, 212); color:white;">Guardar</button>
      <a href="#" rel="modal:close" style="padding:8px; border-style: solid; border-width: 1.5px; border-color: rgb(41, 46, 49); color: rgb(41, 46, 49);">Descartar</a>
      </form>
  </div> 
</div>

<!-- Link to open the modal -->
<p><a id="register" href="#ex1" rel="modal:open">Open Modal</a></p>

{% endblock %}
<!-- </CalendarSnippet> -->
